<head>
  <title> Truth Table Creator </title>
    <script type="text/javascript" src="js/libs/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="js/libs/handlebars-1.0.0.js"></script>
    <script type="text/javascript" src="js/libs/ember.js"></script>
    <script type="text/javascript" src="js/libs/boolean_evaluate.js"></script>
    <script type="text/javascript" src="js/libs/boolean_print.js"></script>
    <script type="text/javascript" src="js/libs/boolean_split.js"></script>
    <script type="text/javascript" src="js/libs/underscore-min.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheets/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/application.css">
</head>
<body>
    <script type="text/x-handlebars" data-template-name="components/truth-row">
        {{#each variable in variables}}
          {{truth-variable selectedExpression=selectedExpression variable=variable index=row variables=variables tagName="td" classNames="large-font variable"}} 
        {{/each}}
        {{#each node in ast}}
            {{truth-node selectedExpression=selectedExpression mistakes=mistakes node=node variable=variables answered=answered row=row feedback=feedback evaluation=evaluation tagName="td" classNames="guess"}}
        {{/each}}
    </script>

    <script type="text/x-handlebars" id="components/truth-node">
        {{view App.TruthChecker size=1 maxlength=1 disabledBinding=evaluation valueBinding=guess cols=2 rows=1 colorBinding=colorCheck focus-in="updateSelectedExpression" focus-out="clearSelectedExpression" answerBinding=truthAssignment}}
    </script>

    <script type="text/x-handlebars" id="components/truth-variable">
        <p>{{truthValue}}</p>
    </script>

    <script type="text/x-handlebars" data-template-name="application">
      <div id="wrap">
          <div id="main" class="container clear-top">
            {{outlet}}
          </div>
        </div>
        <footer class="footer"><p>LICENSE</p><p> You may use, redistribute, sell, modify this code as long as you credit Bastion Fennell, Eysa Lee, and Thomas Kim.</p><p>If modified, you must state that the code has been modified from its original form</p></footer>
    </script>

    <script type="text/x-handlebars" data-template-name="explain">
      <div class="row title">
        <h2> Truth Table Creator </h2>
      </div>
      <div class="row">
        <p> Welcome to the truth app landing page! It's still a work in progress, but if you'd like to check it out, please put in an expression below and give it a shot! </p>
        <p>The source code for this project can be found here: <a href="https://github.com/Thomas-Kim/truth-tables">https://github.com/Thomas-Kim/truth-tables</a></p>
      </div>
      <div class="row">
        Expression: {{view App.ExpressionChecker valueBinding="expression" rows=1 invalidExpressionBinding="invalidExpression"}}
        Want feedback? {{input type="checkbox" checkedBinding="feedback"}}
        {{#link-to 'truth' feedback expression}}<button {{bind-attr disabled="invalidExpression"}} class="enter-expression">Enter</button>{{/link-to}}
      </div>
      <div class="row">
        <p>Legend:</p>
        <div class="table">
          <table>
            <thead>
              <td>Operator</td>
              <td>What to Type</td>
            </thead>
            <tbody>
              <tr>
                <td>&or;</td>
                <td>|</td>
              </tr>
              <tr>
                <td>&and;</td>
                <td>&</td>
              </tr>
              <tr>
                <td>&rarr;</td>
                <td>-></td>
              </tr>
              <tr>
                <td>&larr;</td>
                <td><-</td>
              </tr>
              <tr>
                <td>&not;</td>
                <td>!</td>
              </tr>
              <tr>
                <td>&equiv;</td>
                <td>=</td>
              </tr>
              <tr>
                <td>&#8891;</td>
                <td>X</td>
              </tr>
              <tr>
                <td>&#8892;</td>
                <td>NAND</td>
              </tr>
              <tr>
                <td>&#8893;</td>
                <td>NOR</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="feedback">
        {{outlet}}
    </script>
    <script type="text/x-handlebars" data-template-name="truth">
        <div class="title row">
          <h3> Truth Table for <strong>{{{formatted_expression}}}</strong></h3>
        </div>
        <div class="row">
          <div class="table">
            <table>
              <thead>
                {{#each variable in variables}}
                    <td class="large-font"> {{variable}} </td>
                {{/each}}
                {{#each node in ast_clean}}
                  <td class="large-font"> {{{node}}} </td>
                {{/each}}
              </thead>
              <tbody>
                {{#each given_number in number_list}}
                    {{truth-row ast=ast variables=variables row=given_number feedback=feedback tagName="tr" mistakes=mistakes answered=answered evaluation=evaluation}}
                {{/each}}
              </tbody>
            </table>

            <div class="row">
            {{#if feedback_bool}}
                <p> {{mistakes}} mistakes made so far. </p>
            {{else}}
              <button {{action 'evaluate'}}>Evaluate </button>
            {{/if}}
            </div>
          </div>
        </div>
    </script>
</body>
